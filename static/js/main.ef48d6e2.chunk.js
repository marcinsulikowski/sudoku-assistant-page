(this["webpackJsonpsudoku-assistant"]=this["webpackJsonpsudoku-assistant"]||[]).push([[0],{10:function(e,l,t){e.exports=t(11)},11:function(e,l,t){"use strict";t.r(l);var a=t(4),r=t(7),n=t(2),o=t(3),s=t(6),c=t(5),i=t(0),u=t.n(i),d=t(9),f=t.n(d),v=(t(16),t(17),t(18).default);var h=function(e){Object(s.a)(t,e);var l=Object(c.a)(t);function t(){return Object(n.a)(this,t),l.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){for(var e=this,l=Array(6).fill(""),t=0,a=1;a<=9&&(!this.props.cell.cornerMarks[a]||(l[t]+=a,++t!==l.length));++a);for(var r="",n=1;n<=9;++n)this.props.cell.centerMarks[n]&&(r+=n);return u.a.createElement("div",{className:function(){var l="cell";return null!==e.props.cell.color&&(l+=" color".concat(e.props.cell.color)),e.props.cell.fixed||(l+=" variable"),e.props.cell.selected&&(l+=" selected"),e.props.cell.incorrect&&(l+=" incorrect"),null!==e.props.cell.value&&(l+=" disable-pencil-marks"),l}(),onClick:this.props.onClick},u.a.createElement("div",{className:"pencil-marks"},u.a.createElement("div",{className:"pencil-mark corner top-l"},l[0]),u.a.createElement("div",{className:"pencil-mark corner top-r"},l[1]),u.a.createElement("div",{className:"pencil-mark corner bottom-l"},l[2]),u.a.createElement("div",{className:"pencil-mark corner bottom-r"},l[3]),u.a.createElement("div",{className:"pencil-mark corner top-c"},l[4]),u.a.createElement("div",{className:"pencil-mark corner bottom-c"},l[5]),u.a.createElement("div",{className:"pencil-mark central"},r)),this.props.cell.value)}}]),t}(u.a.Component),y=function(e){Object(s.a)(t,e);var l=Object(c.a)(t);function t(){return Object(n.a)(this,t),l.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){for(var e=this,l=0,t=[],a=0;a<3;++a)for(var r=0;r<3;++r){for(var n=[],o=0;o<3;++o)for(var s=function(t){var s=3*a+o,c=3*r+t;n.push(u.a.createElement(h,{key:++l,cell:e.props.sudoku.getCell(s,c),onClick:function(l){return e.props.handleClick(l,s,c)}}))},c=0;c<3;++c)s(c);t.push(u.a.createElement("div",{className:"box",key:++l},n))}return u.a.createElement("div",{className:"board"},t)}}]),t}(u.a.Component),k=function(e){Object(s.a)(t,e);var l=Object(c.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=l.call(this,e)).handleClick=function(e,l,t){var a=o.state.sudoku.clone();e.ctrlKey||a.deselectAll(),a.toggleSelection(l,t),o.setState({sudoku:a})},o.handleKey=function(e){var l=function(e){var l=e.key;return e.metaKey&&(l="Meta-"+l),e.altKey&&(l="Atl-"+l),e.ctrlKey&&(l="Control-"+l),e.shiftKey&&(l="Shift-"+l),l}(e);if("Control-z"===l)return o.handleUndo();if("Control-y"===l)return o.handleRedo();if(" "===l)return o.setState((function(e){switch(e.mode){case"normal":return{mode:"center"};case"center":return{mode:"corner"};case"corner":return{mode:"color"};default:return{mode:"normal"}}}));if("a"===l)return o.setState({mode:"normal"});if("z"===l)return o.setState({mode:"center"});if("x"===l)return o.setState({mode:"corner"});if("c"===l)return o.setState({mode:"color"});var t=o.state.sudoku.clone();if(/^[1-9]$/.test(l)){var a=l.charCodeAt(0)-"0".charCodeAt(0);"normal"===o.state.mode?(t.setValueInSelectedCells(a),t.runHelpers(o.state.helpers),o.pushToUndoList(t)):"center"===o.state.mode?(t.toggleCenterInSelectedCells(a),o.pushToUndoList(t)):"corner"===o.state.mode&&(t.toggleCornerInSelectedCells(a),o.pushToUndoList(t))}else"Delete"===l?"color"===o.state.mode?(t.setColorInSelectedCells(null),o.pushToUndoList(t)):(t.clearValueInSelectedCells(),t.runHelpers(o.state.helpers),o.pushToUndoList(t)):"Enter"===l?"color"===o.state.mode&&(t.setColorInSelectedCells(o.state.selectedColor),o.pushToUndoList(t)):"ArrowLeft"===l?t.moveSelection(0,-1):"ArrowRight"===l?t.moveSelection(0,1):"ArrowUp"===l?t.moveSelection(-1,0):"ArrowDown"===l&&t.moveSelection(1,0);o.setState({sudoku:t})},o.handleSetMode=function(e,l){o.setState({mode:e}),null!==l&&o.setState({selectedColor:l})},o.handleLoad=function(e){var l=e.clipboardData.getData("Text"),t=o.state.sudoku.clone();t.loadPuzzle(l),t.runHelpers(o.state.helpers),o.pushToUndoList(t),o.setState({sudoku:t})},o.handleSave=function(){o.saveTextArea.current.value=o.state.sudoku.savePuzzle(),o.saveTextArea.current.style.display="block",o.saveTextArea.current.select(),document.execCommand("copy"),o.saveTextArea.current.style.display="none"},o.handleUndo=function(){o.historyPosition>0&&o.setState({sudoku:o.history[--o.historyPosition]})},o.handleRedo=function(){o.historyPosition<o.history.length-1&&o.setState({sudoku:o.history[++o.historyPosition]})},o.handleClear=function(){var e=new v;o.pushToUndoList(e),o.setState({sudoku:e})},o.handleRestart=function(){var e=o.state.sudoku.clone();e.restart(),e.runHelpers(o.state.helpers),o.pushToUndoList(e),o.setState({sudoku:e})},o.handleHelperFlagChange=function(e){o.setState((function(l){var t=Object(r.a)(Object(r.a)({},l.helpers),{},Object(a.a)({},e,!l.helpers[e])),n=l.sudoku.clone();return n.runHelpers(t),o.pushToUndoList(n),{sudoku:n,helpers:t}}))},o.saveTextArea=u.a.createRef(),o.state={mode:"normal",selectedColor:0,sudoku:new v,helpers:{removeInvalidMarks:!0,addCenterMarks:!0,addCornerMarks:!0,fillOnSingleCenterMark:!0,fillOnSingleCornerMark:!0}},o.history=[o.state.sudoku],o.historyPosition=0,o}return Object(o.a)(t,[{key:"pushToUndoList",value:function(e){this.historyPosition<this.history.length-1&&(this.history=this.history.slice(0,this.historyPosition+1)),this.history.push(e),this.historyPosition++}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKey)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKey)}},{key:"render",value:function(){var e=this,l=function(l,t){var a=l.charAt(0).toUpperCase()+l.slice(1),r=e.state.mode===l;return u.a.createElement("button",{className:"mode "+(r?"selected":""),onClick:function(){return e.handleSetMode(l,null)}},"".concat(a," (").concat(t,")"))},t=function(l){var t="color"===e.state.mode&&e.state.selectedColor===l;return u.a.createElement("button",{className:"color "+(t?"selected":""),onClick:function(){return e.handleSetMode("color",l)}},u.a.createElement("div",{className:"sample color".concat(l)}))},a=function(l,t){return u.a.createElement("div",{className:"helper-flag"},u.a.createElement("input",{type:"checkbox",checked:e.state.helpers[l],onChange:function(t){return e.handleHelperFlagChange(l)}}),u.a.createElement("label",null,t))};return u.a.createElement("div",{className:"game",onPaste:this.handleLoad},u.a.createElement(y,{sudoku:this.state.sudoku,handleClick:this.handleClick}),u.a.createElement("div",{className:"panel"},u.a.createElement("div",{className:"controls"},l("normal","A"),l("center","Z"),l("corner","X"),t(0),t(1),t(2),t(3),t(4),t(5),t(6),t(7),t(8),u.a.createElement("button",{onClick:this.handleUndo},"Undo"),u.a.createElement("button",{onClick:this.handleRedo},"Redo"),u.a.createElement("button",{onClick:this.handleSave},"Copy to clipboard"),u.a.createElement("button",{onClick:this.handleClear},"Clear board"),u.a.createElement("button",{onClick:this.handleRestart},"Restart"),a("removeInvalidMarks","Remove invalid marks"),a("addCenterMarks","Automatically add center marks"),a("addCornerMarks","Automatically add corner marks"),a("fillOnSingleCenterMark","Automatically fill values based on center marks"),a("fillOnSingleCornerMark","Automatically fill values based on corner marks")),u.a.createElement("textarea",{className:"save",ref:this.saveTextArea})))}}]),t}(u.a.Component);f.a.render(u.a.createElement(k,null),document.getElementById("root"))},16:function(e,l,t){},18:function(e,l,t){"use strict";t.r(l);var a=t(1),r=t(2),n=t(3);function o(e){for(var l=0,t=1;t<=9;++t)e[t]&&l++;return l}function s(e,l){for(var t=1;t<=9;++t)e[t]=e[t]&&l[t]}function c(e,l){for(var t=1;t<=9;++t)e[t]=e[t]||l[t]}var i=function(){function e(){Object(r.a)(this,e),this.lastSelected={row:0,column:0},this.cells=Array(9);for(var l=0;l<9;l++){this.cells[l]=Array(9);for(var t=0;t<9;t++)this.cells[l][t]={row:l,column:t,index:9*l+t,selected:!1,incorrect:!1,fixed:!1,value:null,color:null,centerMarks:Array(10).fill(!1),cornerMarks:Array(10).fill(!1),possibleValues:Array(10).fill(!1)}}}return Object(n.a)(e,[{key:"clone",value:function(){var e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.lastSelected=JSON.parse(JSON.stringify(this.lastSelected)),e.cells=JSON.parse(JSON.stringify(this.cells)),e}},{key:"savePuzzle",value:function(){var e,l=Array(81).fill(0),t=Object(a.a)(this.getAllCells());try{for(t.s();!(e=t.n()).done;){var r=e.value;l[r.index]=null===r.value?0:r.value}}catch(n){t.e(n)}finally{t.f()}return l.join("")}},{key:"loadPuzzle",value:function(e){var l,t=Object(a.a)(this.getAllCells());try{for(t.s();!(l=t.n()).done;){var r=l.value,n=e.charCodeAt(r.index)-"0".charCodeAt(0);r.value=0===n?null:n,r.color=null,r.fixed=null!==r.value,r.cornerMarks.fill(!1),r.centerMarks.fill(!1)}}catch(o){t.e(o)}finally{t.f()}}},{key:"restart",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){var t=e.value;t.color=null,t.fixed||(t.value=null,t.cornerMarks.fill(!1),t.centerMarks.fill(!1))}}catch(r){l.e(r)}finally{l.f()}}},{key:"getCell",value:function(e,l){return this.cells[e][l]}},{key:"getSelectedCells",value:function(){return this.getAllCells().filter((function(e){return e.selected}))}},{key:"getAllCells",value:function(){for(var e=[],l=0;l<9;++l)e=e.concat(this.cells[l]);return e}},{key:"getRowCells",value:function(e){return this.cells[e]}},{key:"getColumnCells",value:function(e){for(var l=[],t=0;t<9;++t)l.push(this.cells[t][e]);return l}},{key:"getBoxCells",value:function(e,l){for(var t=[],a=0;a<3;++a)for(var r=0;r<3;++r){var n=3*e+a,o=3*l+r;t.push(this.cells[n][o])}return t}},{key:"getAllBoxes",value:function(){for(var e=[],l=0;l<3;l++)for(var t=0;t<3;t++)e.push(this.getBoxCells(l,t));return e}},{key:"getAllRegions",value:function(){for(var e=this.getAllBoxes(),l=0;l<9;l++)e.push(this.getRowCells(l));for(var t=0;t<9;t++)e.push(this.getColumnCells(t));return e}},{key:"deselectAll",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){e.value.selected=!1}}catch(t){l.e(t)}finally{l.f()}}},{key:"toggleSelection",value:function(e,l){var t=this.getCell(e,l);t.selected=!t.selected,this.lastSelected={row:e,column:l}}},{key:"moveSelection",value:function(e,l){var t,r=Object(a.a)(this.getAllCells());try{for(r.s();!(t=r.n()).done;){t.value.selected=!1}}catch(n){r.e(n)}finally{r.f()}this.lastSelected.row=Math.max(0,Math.min(8,this.lastSelected.row+e)),this.lastSelected.column=Math.max(0,Math.min(8,this.lastSelected.column+l)),this.getCell(this.lastSelected.row,this.lastSelected.column).selected=!0}},{key:"setValueInSelectedCells",value:function(e){var l,t=Object(a.a)(this.getSelectedCells());try{for(t.s();!(l=t.n()).done;){var r=l.value;r.fixed||(r.value=e)}}catch(n){t.e(n)}finally{t.f()}}},{key:"clearValueInSelectedCells",value:function(){var e,l=Object(a.a)(this.getSelectedCells());try{for(l.s();!(e=l.n()).done;){var t=e.value;null===t.value?(t.centerMarks.fill(!1),t.cornerMarks.fill(!1)):t.fixed||(t.value=null)}}catch(r){l.e(r)}finally{l.f()}}},{key:"toggleCenterInSelectedCells",value:function(e){var l,t=Object(a.a)(this.getSelectedCells());try{for(t.s();!(l=t.n()).done;){var r=l.value;null===r.value&&(r.centerMarks[e]=!r.centerMarks[e])}}catch(n){t.e(n)}finally{t.f()}}},{key:"toggleCornerInSelectedCells",value:function(e){var l,t=Object(a.a)(this.getSelectedCells());try{for(t.s();!(l=t.n()).done;){var r=l.value;null===r.value&&(r.cornerMarks[e]=!r.cornerMarks[e])}}catch(n){t.e(n)}finally{t.f()}}},{key:"setColorInSelectedCells",value:function(e){var l,t=Object(a.a)(this.getSelectedCells());try{for(t.s();!(l=t.n()).done;){l.value.color=e}}catch(r){t.e(r)}finally{t.f()}}},{key:"runHelpers",value:function(e){var l=!1;do{if(this.updateIncorrect())return;this.updatePossibleValues(),e.removeInvalidMarks&&this.clearImpossibleMarks(),e.addCenterMarks&&this.autofillCenterMarks(),e.addCornerMarks&&this.autofillCornerMarks(),l=!1,e.fillOnSingleCenterMark&&(l|=this.autofillValuesOnSingleCenterMarks()),e.fillOnSingleCornerMark&&(l|=this.autofillValuesOnSingleCornerMarks())}while(l)}},{key:"updateIncorrect",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){e.value.incorrect=!1}}catch(h){l.e(h)}finally{l.f()}var t,r=!1,n=Object(a.a)(this.getAllRegions());try{for(n.s();!(t=n.n()).done;){var o,s=t.value,c=Array(10).fill(0),i=Object(a.a)(s);try{for(i.s();!(o=i.n()).done;){var u=o.value;null!==u.value&&c[u.value]++}}catch(h){i.e(h)}finally{i.f()}var d,f=Object(a.a)(s);try{for(f.s();!(d=f.n()).done;){var v=d.value;null!==v.value&&c[v.value]>1&&(v.incorrect=!0,r=!0)}}catch(h){f.e(h)}finally{f.f()}}}catch(h){n.e(h)}finally{n.f()}return r}},{key:"updatePossibleValues",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){var t=e.value;t.possibleValues=Array(10).fill(!0),t.possibleValues[0]=!1}}catch(h){l.e(h)}finally{l.f()}var r,n=Object(a.a)(this.getAllRegions());try{for(n.s();!(r=n.n()).done;){var o,c=r.value,i=Array(10).fill(!0),u=Object(a.a)(c);try{for(u.s();!(o=u.n()).done;){var d=o.value;null!==d.value&&(i[d.value]=!1)}}catch(h){u.e(h)}finally{u.f()}var f,v=Object(a.a)(c);try{for(v.s();!(f=v.n()).done;){s(f.value.possibleValues,i)}}catch(h){v.e(h)}finally{v.f()}}}catch(h){n.e(h)}finally{n.f()}}},{key:"clearImpossibleMarks",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){var t=e.value;s(t.centerMarks,t.possibleValues),s(t.cornerMarks,t.possibleValues)}}catch(r){l.e(r)}finally{l.f()}}},{key:"autofillCenterMarks",value:function(){var e,l=Object(a.a)(this.getAllCells());try{for(l.s();!(e=l.n()).done;){var t=e.value;null===t.value&&0===o(t.centerMarks)&&o(t.possibleValues)<=3&&(t.centerMarks=t.possibleValues.slice())}}catch(r){l.e(r)}finally{l.f()}}},{key:"autofillCornerMarks",value:function(){var e,l=Object(a.a)(this.getAllBoxes());try{for(l.s();!(e=l.n()).done;){var t,r=e.value,n=Array(10).fill(!1),o=Array(10).fill(0),s=Object(a.a)(r);try{for(s.s();!(t=s.n()).done;){var i=t.value;if(null===i.value){c(n,i.cornerMarks);for(var u=1;u<=9;++u)i.possibleValues[u]&&(o[u]+=1)}}}catch(y){s.e(y)}finally{s.f()}for(var d=1;d<=9;++d)if(!(n[d]||0===o[d]||o[d]>2)){var f,v=Object(a.a)(r);try{for(v.s();!(f=v.n()).done;){var h=f.value;null===h.value&&h.possibleValues[d]&&(h.cornerMarks[d]=!0)}}catch(y){v.e(y)}finally{v.f()}}}}catch(y){l.e(y)}finally{l.f()}}},{key:"autofillValuesOnSingleCenterMarks",value:function(){var e,l=!1,t=Object(a.a)(this.getAllCells());try{for(t.s();!(e=t.n()).done;){var r=e.value;null===r.value&&1===o(r.possibleValues)&&(r.value=r.possibleValues.indexOf(!0),l=!0)}}catch(n){t.e(n)}finally{t.f()}return l}},{key:"autofillValuesOnSingleCornerMarks",value:function(){var e,l=!1,t=Object(a.a)(this.getAllBoxes());try{for(t.s();!(e=t.n()).done;){var r,n=e.value,o=Array(10).fill(0),s=Array(10).fill(!1),c=Array(10).fill(null),i=Object(a.a)(n);try{for(i.s();!(r=i.n()).done;){var u=r.value;if(null!==u.value)s[u.value]=!0;else for(var d=1;d<=9;++d)u.possibleValues[d]&&(1===++o[d]?c[d]=u:c[d]=null)}}catch(v){i.e(v)}finally{i.f()}for(var f=1;f<=9;++f)s[f]||null===c[f]||(c[f].value=f,l=!0)}}catch(v){t.e(v)}finally{t.f()}return l}}]),e}();l.default=i}},[[10,1,2]]]);
//# sourceMappingURL=main.ef48d6e2.chunk.js.map